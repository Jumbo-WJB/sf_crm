(function(){var c=navigator.userAgent.toLowerCase(),d=(c.indexOf("iphone")>-1)?1:0,b=(c.indexOf("ipad")>-1)?1:0;var a=(c.indexOf("micromessenger")>-1)?c.match(/micromessenger\/([\d.]+)/)[1]:"1.0";window.isNewV=1;if(a<"6.0.2.58"){if((d||b)&&(a>="6.0.2")){window.isNewV=1}else{window.isNewV=0}}})();function shareywk(e,d,c,a,g){if(isNewV){jsload(sharejsNewUrl,b,"wx")}else{jsload(sharejsOldUrl,f,"WeixinApi")}function f(){WeixinApi.ready(function(){setShare(e,d,c,a,g)})}function b(){wx.config({debug:wxConfig.debug,appId:wxConfig.appId,timestamp:wxConfig.timestamp,nonceStr:wxConfig.nonceStr,signature:wxConfig.signature,jsApiList:wxConfig.jsApiList});wx.error(function(h){window.isNewV=0;jsload(sharejsOldUrl,f,"WeixinApi")});wx.ready(function(){if(isNewV==1){wx.checkJsApi({jsApiList:["onMenuShareTimeline","onMenuShareAppMessage"],success:function(h){var i=h.checkResult;if(!i.onMenuShareAppMessage||!i.onMenuShareTimeline){window.isNewV=0;jsload(sharejsOldUrl,f,"WeixinApi")}else{setShare(e,d,c,a,g)}}})}})}}function jsload(b,a,c){if((c=="wx")&&(typeof(wx)=="object")){a&&a();return false}if((c=="WeixinApi")&&(typeof(WeixinApi)=="object")){a&&a();return false}if(document.getElementById(c)){a&&a()}else{var e=document.getElementsByTagName("head")[0];var d=document.createElement("script");d.setAttribute("id",c);d.setAttribute("type","text/javascript");d.setAttribute("src",b);e.appendChild(d);if(document.all){d.onreadystatechange=function(){if(d.readyState=="loaded"||d.readyState=="complete"){a&&a()}}}else{d.onload=function(){a&&a()}}}}function setShare(e,f,b,a,g){var i={};var c=[];(typeof(hide_menus)!="undefined")&&(c=hide_menus);(typeof(hideShareFCircle)!="undefined")&&c.push("menuItem:share:timeline");if(e){if(e.desc&&e.desc.length>0){e.subject=e.subject+"("+e.desc+")"}i.appId=e.app_id;i.title=e.title;i.desc=e.subject;i.link=e.link;i.imgUrl=e.pic_url;i.type=(typeof(e.type)!="undefined")?e.type:"link";i.dataUrl=(typeof(e.dataUrl)!="undefined")?e.dataUrl:""}else{i.appId=wxConfig.appId;i.title=(typeof(prd_title)!="undefined")?prd_title:title;i.desc=(typeof(prd_desc)!="undefined")?prd_desc:desc;i.link=(typeof(prd_href)!="undefined")?prd_href:link;i.imgUrl=(typeof(prd_pic_url)!="undefined")?prd_pic_url:imgUrl;i.type=(typeof(share_type)!="undefined")?share_type:"link";i.dataUrl=(typeof(share_dataUrl)!="undefined")?share_dataUrl:""}if(i.link.indexOf("UniqueKey=")<=-1){if(i.link.indexOf("?")>-1){shareUniKey="&UniqueKey="+shareUniKey}else{shareUniKey="?UniqueKey="+shareUniKey}i.link=i.link+shareUniKey}var h={favorite:false,ready:d(),cancel:function(){if(f){f("cancle_fun")}},fail:function(){if(a){a("fail_fun")}},confirm:function(){if(b){if(e.data){b(e.data,"friend")}else{b("friend")}}if(typeof(Collect)=="undefined"){}else{if(typeof(Collect)=="function"){var j={};var l={};j.collectUrl=collectUrl;j.active=2;var k=new Collect();l=k.count(j)}}},complete:function(){if(complete_fun){complete_fun()}}};function d(){return function(){return true}}if(isNewV){newShare(i,h)}else{oldShare(i,h)}if(g==0){hideOptionMenu()}if(c.length>0){wx.hideMenuItems({menuList:c})}}function oldShare(a,b){WeixinApi.shareToFriend(a,b);WeixinApi.shareToTimeline(a,b);WeixinApi.shareToWeibo(a,b);WeixinApi.generalShare(a,b)}function newShare(a,b){wx.onMenuShareAppMessage({title:a.title,desc:a.desc,link:a.link,imgUrl:a.imgUrl,type:a.type,dataUrl:a.dataUrl,trigger:function(c){b.ready()},success:function(){b.confirm()},cancel:function(){b.cancel()},fail:function(c){b.fail()}});wx.onMenuShareTimeline({title:a.desc,desc:a.title,link:a.link,imgUrl:a.imgUrl,trigger:function(c){b.ready()},success:function(){b.confirm()},cancel:function(){b.cancel()},fail:function(c){b.fail()}});wx.onMenuShareQQ({title:a.title,desc:a.desc,link:a.link,imgUrl:a.imgUrl,trigger:function(c){b.ready()},complete:function(c){b.complete()},success:function(c){b.confirm()},cancel:function(c){b.cancel()},fail:function(c){b.fail()}});wx.onMenuShareWeibo({title:a.title,desc:a.desc,link:a.link,imgUrl:a.imgUrl,trigger:function(c){b.ready()},complete:function(c){b.complete()},success:function(c){b.confirm()},cancel:function(c){b.cancel()},fail:function(c){b.fail()}})}function hideOptionMenu(){if(isNewV){wx.hideOptionMenu()}else{WeixinApi.hideOptionMenu()}}function showOptionMenu(){if(isNewV){wx.showOptionMenu()}else{WeixinApi.showOptionMenu()}};